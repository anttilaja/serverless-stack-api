{"ast":null,"code":"import \"source-map-support/register\";\nimport handler from \"./libs/handler-lib\";\nimport dynamoDb from \"./libs/dynamodb-lib\";\nexport const main = handler(async (event, context) => {\n  const params = {\n    TableName: process.env.tableName,\n    // 'KeyConditionExpression' defines the condition for the query\n    // - 'userId = :userId': only return items with matching 'userId'\n    //   partition key\n    // 'ExpressionAttributeValues' defines the value in the condition\n    // - ':userId': defines 'userId' to be Identity Pool identity id\n    //   of the authenticated user\n    KeyConditionExpression: \"userId = :userId\",\n    ExpressionAttributeValues: {\n      \":userId\": event.requestContext.identity.cognitoIdentityId\n    }\n  };\n  const result = await dynamoDb.query(params); // Return the matching list of items in response body\n\n  return result.Items;\n});","map":{"version":3,"sources":["/home/ubunturemote/devprojects/node/notes-app-api/list.js"],"names":["handler","dynamoDb","main","event","context","params","TableName","process","env","tableName","KeyConditionExpression","ExpressionAttributeValues","requestContext","identity","cognitoIdentityId","result","query","Items"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AAEA,OAAO,MAAMC,IAAI,GAAGF,OAAO,CAAC,OAAOG,KAAP,EAAcC,OAAd,KAA0B;AACpD,QAAMC,MAAM,GAAG;AACbC,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADV;AAEb;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,sBAAsB,EAAE,kBARX;AASbC,IAAAA,yBAAyB,EAAE;AACzB,iBAAWR,KAAK,CAACS,cAAN,CAAqBC,QAArB,CAA8BC;AADhB;AATd,GAAf;AAcA,QAAMC,MAAM,GAAG,MAAMd,QAAQ,CAACe,KAAT,CAAeX,MAAf,CAArB,CAfoD,CAiBpD;;AACA,SAAOU,MAAM,CAACE,KAAd;AACD,CAnB0B,CAApB","sourcesContent":["import handler from \"./libs/handler-lib\";\nimport dynamoDb from \"./libs/dynamodb-lib\";\n\nexport const main = handler(async (event, context) => {\n  const params = {\n    TableName: process.env.tableName,\n    // 'KeyConditionExpression' defines the condition for the query\n    // - 'userId = :userId': only return items with matching 'userId'\n    //   partition key\n    // 'ExpressionAttributeValues' defines the value in the condition\n    // - ':userId': defines 'userId' to be Identity Pool identity id\n    //   of the authenticated user\n    KeyConditionExpression: \"userId = :userId\",\n    ExpressionAttributeValues: {\n      \":userId\": event.requestContext.identity.cognitoIdentityId\n    }\n  };\n\n  const result = await dynamoDb.query(params);\n\n  // Return the matching list of items in response body\n  return result.Items;\n});\n"]},"metadata":{},"sourceType":"module"}